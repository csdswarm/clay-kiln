<div class="component component--station-nav" data-uri="{{ default _ref _self }}">
  <nav class="station-nav__fixed-container">
    <div class="station-nav__menu menu">
      <div class="menu__mobile-toggle">
          <button class="mobile-toggle--closed">
            {{{ read 'components/station-nav/media/chevron_down.svg' }}}
          </button>
          <button class="mobile-toggle--open">
            {{{ read 'components/station-nav/media/chevron_up.svg' }}}
          </button>
      </div>
      <img class="menu__image" src="{{ default stationLogo station.square_logo_small }}?width=100&height=100&crop=1:1">
      {{#if primaryLinks.length }}
        <ul class="menu__navigation navigation">
          {{#each primaryLinks }}
            <li class="navigation__primary primary primary--label-{{ text }} {{ if current 'primary--current' }} {{ if drawer 'primary--drawer-enabled' }}">
              {{#if url }}
                <a href="{{ url }}">
                  <button>
                    <span>{{ text }}</span>
                  </button>
                </a>
              {{ else }}
                <button>
                  <span>{{ text }}</span>
                </button>
                <div class="primary__triangle"></div>
              {{/if }}
            </li>
          {{/each }}
        </ul>
      {{/if }}
      <div class="menu__listen listen">
        <button class="listen__button button" data-station-id="{{ station.id }}">
          <div class="button__icon {{ playingClass }}">
            {{!-- stays static --}}
            {{{ read 'components/station-nav/media/play_button.svg' }}}
          </div>
          <div class="button__text">listen</div>
        </button>
      </div>
      <div class="menu__listen-toggle">
        <button class="listen-toggle--closed">
          {{{ read 'components/station-nav/media/chevron_down.svg' }}}
        </button>
        <button class="listen-toggle--open">
          {{{ read 'components/station-nav/media/chevron_up.svg' }}}
        </button>
      </div>
    </div>
    <div class="station_nav__drawers drawers">
      {{#each primaryLinks }}
        {{#ifAll drawer secondaryLinks.length }}
          <ul class="drawers__drawer drawer drawer--desktop drawer--{{ text }}">
            {{#each secondaryLinks }}
              <li class="drawer__item item--{{ text }}">
                <a href="{{ url }}">
                  <span>{{ text }}</span>
                </a>
              </li>
            {{/each }}
          </ul>
        {{/ifAll }}
      {{/each }}

      {{#if primaryLinks.length }}
        <ul class="drawers__drawer drawer drawer--mobile">
          {{#each primaryLinks }}
            <li class="drawer__item item item--{{ text }}">
              <div class="item__label label">
                {{#ifAll drawer secondaryLinks.length }}
                <button>
                  <span>{{ text }}</span>
                </button>
                <div class="label__menu-toggle">
                  <button class="menu-toggle--closed">
                    {{{ read 'components/station-nav/media/chevron_down.svg' }}}
                  </button>
                  <button class="menu-toggle--open">
                    {{{ read 'components/station-nav/media/chevron_up.svg' }}}
                  </button>
                </div>
                {{else }}
                <a href="{{ url }}">
                  <button>
                    <span>{{ text }}</span>
                  </button>
                </a>
                {{/ifAll }}
              </div>
              {{#if secondaryLinks.length }}
                <ul>
                  {{#each secondaryLinks }}
                    <li>
                      <a href="{{ url }}">
                        <button>
                          <span>{{ text }}</span>
                        </button>
                      </a>
                    </li>
                  {{/each }}
                </ul>
              {{/if }}
            </li>
          {{/each }}
        </ul>
      {{/if }}

      <div class="drawers__drawer drawer drawer--listen">
        <section class="drawer__playing">
          <ul>
            <li>
              <h3>now playing</h3>
              <div data-play-station="{{ station.id }}">
                <img src="{{ nowPlaying.imageUrl }}?width=100&height=100&crop=1:1,offset-y0" alt="{{ nowPlaying.title }}">
                <div>
                  <h3>{{ nowPlaying.title }}</h3>
                  <span>{{ nowPlaying.artist }}</span>
                </div>
              </div>
            </li>
            <li>
              <h3>on-air</h3>
              <div data-play-station="{{ station.id }}">
                <img src="{{ onAir.image }}?width=100&height=100&crop=1:1,offset-y0" alt="{{ onAir.name }}">
                <div>
                  <h3>{{ onAir.name }}</h3>
                  <span>{{ onAir.timeSlot }}</span>
                </div>
              </div>
            </li>
          </ul>
        </section>
        <section class="drawer__audio">
          <ul>
            <li>
              <h3>audio from {{ station.name }}</h3>
              <ul>
                <li>
                  <span data-play-station="{{ station.id }}">Live</span>
                </li>
                <li>
                  <a href="/podcasts">
                    <span>Podcasts</span>
                  </a>
                </li>
              </ul>
            </li>
            {{#if station.phonetic_name }}
            <li class="drawer__smart-speaker">
              <span>Ask your smart speaker to play</span>
              <h3>{{ station.phonetic_name }}</h3>
            </li>
            {{/if }}
          </ul>
        </section>
        <section class="drawer__featured">
          {{#if featuredLinks }}
          <ul>
            {{#each featuredLinks }}
            <li>
              <h3>featured {{ type }}</h3>
              <a href="{{ url }}">
                <img src="{{ image }}?width=100&height=100&crop=1:1,offset-y0" alt="{{ headline }}">
                <span>{{ headline }}</span>
              </a>
            </li>
            {{/each }}
          </ul>
          {{/if }}
        </section>
      </div>
    </div>
  </nav>
</div>
