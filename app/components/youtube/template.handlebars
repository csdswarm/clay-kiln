{{ set 'uniquePlayerID' (randomString 'youtube-player-') }}
{{#ifAny @root.locals.edit videoValid}}
<div data-uri="{{ default _ref _self }}" class="component component--youtube{{if @root.locals.edit ' edit-mode'}}{{#ifAny (compare videoType 'Related') (compare videoType 'Sponsored')}} site-accents{{/ifAny}}{{ if playerBorderTop ' border-top' }}{{ if playerBorderBottom ' border-bottom' }}"
     data-element-id="{{ uniquePlayerID }}"
     data-video-id="{{ videoId }}"
     data-autoplay-next-video="{{ autoPlayNextVideo }}"
     data-autoplay-video="{{ autoPlay }}"
     data-playlist="{{ videoPlaylist }}"
     data-track-video-type="{{ videoType }}"
     data-track-video-location="{{ videoLocation }}"
     data-track-video-title="{{ videoTitle }}"
     data-track-video-duration="{{ videoDuration }}"
     data-track-channel-name="{{ channelName }}"
     data-editable="inline"
     data-origsrc="https://www.youtube.com/watch?v={{ videoId }}">
  {{#if playerBorderTopCTA }}
    <style>
      .youtube[data-uri="{{ default _ref _self }}"].border-top:before {
        content: '{{ playerBorderTopCTA }}';
      }
    </style>
  {{/if}}
  {{#ifAll playerHeadline (compare videoType 'Related')}}
    <h2 class="youtube-headline">{{ playerHeadline }}</h2>
  {{/ifAll}}

  <div class="player-wrapper">
    {{#unless @root.locals.edit}}
      <div class="player" id="{{ uniquePlayerID }}">
        <iframe width="100%" height="400" src="https://www.youtube.com/embed/{{ videoId }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>
    {{else}}
      {{#unless videoValid}}
        <div data-placeholder="videoValid"></div>
      {{else}}
        {{#if videoThumbnail}}
          <img class="youtube-video-preview" src="{{ videoThumbnail }}" alt="">
        {{/if}}
      {{/unless}}
    {{/unless}}
  </div>

  {{#if playerCaption}}
    <p class="youtube-caption">{{ playerCaption }}</p>
  {{/if}}
</div>
{{/ifAny}}
